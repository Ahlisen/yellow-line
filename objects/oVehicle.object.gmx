<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Setup variables, performance, ai
//Misc
state = ai_wait;
inputHorizontal = 0;
inputVertical = 0;

color = c_white;
portraitY = 0;
portraitImage = irandom(2);
alarm[1] = irandom(room_speed); //Start offset cycle if AI
resigned = false;
zStandard = 0;
z = zStandard;


//General performance
resistance = 2;
gear = 1;
gearMax = 3;
steer = 0.1;
catchUpAcceleration = 4;
acceleration = 2;

//Boosting
boost = 0;
boostDecay = 0.01;
prepareBoost = false;
boosting = false;

//Targeting
targetReticleX = x;
targetReticleY = y;
targetReticleOffsetX = 0;
targetReticleOffsetY = 0;
inputHorizontalAim = 0;
inputVerticalAim = 0;
targetVehicle = noone;
targetIndex = 0;

//Charges
missiles = 5;
boosts = 3;

//Administatrive
player = -1;
isPlayer = false;
winner = false;

//AI
steerAI = 0.01;
accelerationAI = 2;
offsetX = 0;
offsetY = 0;
target = oNodeManager.active;
offsetRange = oNodeManager.detectionRange/2; //If less, then drive help does not exit

//Visual effects
shake = 0;
x_scale = 1;
exhaustLength = 0;
exhaustDirection = 0;

//Sounds
soundEngine = noone//audio_play_sound(aSinus, 0, false);
soundMissile = noone;
soundBoostPreparation = noone;
soundBoost = noone;
soundShine = noone;
soundResign = noone;
soundCollide = noone;
soundTargetGet = noone;
soundTargetLock = noone;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///AI behaviour
if(!isPlayer &amp;&amp; !resigned) {
    var randomAngle = irandom(360);
    var randomDist = irandom(offsetRange);
    
    offsetX = randomDist*cos(randomAngle);
    offsetY = randomDist*sin(randomAngle);
    
    gear = 3//irandom_range(1,3);
    
    var firstDriver = ds_list_find_value(oCamera.ranking,0);
    if(oRaceManager.raceStarted &amp;&amp; firstDriver != id) {
        choose(fire_missile(firstDriver),fire_boost());
    }
    alarm[1] = (5+irandom(5))*room_speed;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///BOOST
boost = 1;
prepareBoost = false;
boosting = true;
create_shine(12,10);
audio_play_sound(soundBoost, 0, false);
audio_play_sound(soundShine, 0, false);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///State &amp; Depth
depth = -y;
script_execute(state, accelerationAI, steerAI, target);

/* looping seamlessly is really hard! :(
var pos = audio_sound_get_track_position(engine)
if(pos &gt; 0.99)
audio_sound_set_track_position(engine,0.01);
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Boost &amp; Misc visuals
if(prepareBoost) {
    x_scale = lerp(x_scale, 0.7, 0.02);
} else {
    x_scale = lerp(x_scale, image_xscale+boost, 0.02);
}

if(boost &gt; 0) {
    boost -= boostDecay;
    //create_exhaust_fumes(0,0,color);
} else {
    boost = 0;
    boosting = false;
}

if(state != player_wait) {
    shake = (10*prepareBoost+boost+phy_speed)*0.01;
}

if(targetVehicle) {
    targetReticleOffsetX = lerp(targetReticleOffsetX, 0, 0.05);
    targetReticleOffsetY = lerp(targetReticleOffsetY, 0, 0.05);
    targetReticleX = targetVehicle.x+targetReticleOffsetX;
    targetReticleY = targetVehicle.y+targetReticleOffsetY;
}

create_dust();

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="oSolid">
      <action>
        <libid>1</libid>
        <id>605</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>0</useapplyto>
        <exetype>0</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>Collisions enabled</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="oVehicle">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///play sound
audio_play_sound(soundCollide, 0, false);
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>605</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>0</useapplyto>
        <exetype>0</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>Collisions enabled</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="40">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Toggle AI mode, if player
//var tar = oNodeManager.active;
if(state == player_drive &amp;&amp; isPlayer) {
    image_blend = c_gray;
    state = player_help;
    phy_linear_damping = resistance;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Draw self in 3D
draw_self_3D(shake,z);
//var dir = radtodeg(-arctan2(phy_speed_y,phy_speed_x));
//draw_line(x,y,x+offsetX,y+offsetY);
if(targetVehicle) {
    draw_sprite_ext(sTargetReticle,0,targetReticleX,targetReticleY,1,1,0,color,1);
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
